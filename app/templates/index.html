{% extends "base.html" %}

{% block content %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        fetch('{{ url_for('main.get_featured_products') }}')
            .then(response => response.json())
            .then(data => {
                const carouselWrapper = document.querySelector('.carousel-wrapper');
                data.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.classList.add('product-card');

                    productCard.innerHTML = `
                        <img src="${product.images[0]}" alt="${product.name}">
                        <h3>${product.name}</h3>
                        <p>${product.description}</p>
                        <a href="${product.buy_link}">View Product</a>
                    `;

                    carouselWrapper.appendChild(productCard);
                });
            })
            .catch(error => console.error('Error fetching featured products:', error));
    });
</script>
<main>
    <section id="home">
        <h2>Welcome to the New Christian Order</h2>
        <p>A network of Christians putting God back into business and government.</p>
        <img src="{{ url_for('static', filename='home-image.jpg') }}" alt="Community Image">
        <button>Learn More</button>
    </section>
    <style>
        /* Carousel container */
    .carousel-container {
        position: relative;
        overflow: hidden;
        width: 100%;
        max-width: 1200px; /* Maximum width of the carousel */
        margin: 0 auto;
    }
    
    .carousel-wrapper {
        display: flex;
        transition: transform 0.5s ease-in-out;
    }
    
    .product-card {
        flex: 1 0 300px; /* Each card takes up 300px */
        margin: 1rem;
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        text-align: center;
        position: relative;
    }
    
    .product-card img {
        width: 100%;
        height: auto;
        border-bottom: 1px solid #ddd;
        border-radius: 8px 8px 0 0;
    }
    
    .product-card h3 {
        color: #e03c31; /* Deep red color for headings */
        margin: 0.5rem 0;
    }
    
    .product-card p {
        padding: 0 1rem;
        color: #333;
    }
    
    .product-card a {
        display: block;
        background-color: #e03c31;
        color: #fff;
        padding: 0.5rem;
        text-decoration: none;
        border-radius: 0 0 8px 8px;
        font-weight: bold;
    }
    
    .product-card a:hover {
        background-color: #c42c27; /* Darker red on hover */
    }
    
    /* Carousel navigation buttons */
    .carousel-nav {
        position: absolute;
        top: 50%;
        width: 100%;
        display: flex;
        justify-content: space-between;
        transform: translateY(-50%);
    }
    
    .carousel-nav button {
        background-color: rgba(0, 0, 0, 0.5);
        border: none;
        color: #fff;
        padding: 0.5rem;
        cursor: pointer;
        border-radius: 50%;
    }
    
    .carousel-nav button:hover {
        background-color: rgba(0, 0, 0, 0.7);
    }
    
    </style>

<section id="store">
    <a href="{{ url_for('main.store') }}"><h2>Our Store</h2></a>
    <div class="carousel-container">
        <div class="carousel-wrapper">
            <!-- Product cards will be dynamically inserted here -->
        </div>
        <div class="carousel-nav">
            <button id="prev">&lt;</button>
            <button id="next">&gt;</button>
        </div>
    </div>
</section>
    
    <section id="about">
        <h2>About Us</h2>
        <p>Our mission is to create a supportive community of Christian business leaders who inspire and uplift each other.</p>
        <img src="{{ url_for('static', filename='jon_jlp.jpg') }}" alt="About Us Image">
    </section>
    

    <section id="members">
        <h2>Our Members</h2>
        <p>Meet our members who are making a difference in their industries while staying true to their Christian values.</p>
        <img src="{{ url_for('static', filename='members-image.jpg') }}" alt="Members Image">
        <button>Member Directory</button>
    </section>
    
    
    <section id="events">
        <h2>Upcoming Events</h2>
        <p>Stay tuned for our upcoming events and gatherings that foster both spiritual and professional development.</p>
        <img src="{{ url_for('static', filename='events-image.jpg') }}" alt="Events Image">
    </section>
    
    <section id="join">
        <h2>Join Us</h2>
        <p>Interested in becoming a member? Fill out the form to join our community and get involved in your local NCO Lodge.</p>
        <button>Join Now</button>
    </section>
    
    <section id="contact">
        <h2>Contact Us</h2>
        <p>Have questions or want to get in touch? Reach out to us for more information.</p>
        <img src="{{ url_for('static', filename='contact-image.jpg') }}" alt="Contact Us Image">
    </section>
    <div class="general-container">
        <a href="{{url_for('main.store')}}"><button>Support NCO by visiting our store</button></a>
    </div>
    <p><br></p>
</main>
<script>
    document.addEventListener('DOMContentLoaded', function () {
    const wrapper = document.querySelector('.carousel-wrapper');
    const prevButton = document.getElementById('prev');
    const nextButton = document.getElementById('next');
    
    let index = 0;
    const cardWidth = document.querySelector('.product-card').offsetWidth;
    const cardCount = document.querySelectorAll('.product-card').length;
    
    function updateCarousel() {
        const offset = -index * cardWidth;
        wrapper.style.transform = `translateX(${offset}px)`;
    }
    
    prevButton.addEventListener('click', function () {
        index = (index > 0) ? index - 1 : cardCount - 1;
        updateCarousel();
    });
    
    nextButton.addEventListener('click', function () {
        index = (index < cardCount - 1) ? index + 1 : 0;
        updateCarousel();
    });
});

</script>
{% endblock %}
